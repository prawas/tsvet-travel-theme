!function(e,t,a,s){var n=e(t);e.fn.lazyload=function(i){function o(){var t=0;l.each(function(){var a=e(this);if(!d.skip_invisible||a.is(":visible"))if(e.abovethetop(this,d)||e.leftofbegin(this,d));else if(e.belowthefold(this,d)||e.rightoffold(this,d)){if(++t>d.failure_limit)return!1}else a.trigger("appear"),t=0})}var r,l=this,d={threshold:0,failure_limit:0,event:"scroll.lazyloading",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return i&&(s!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),s!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(d,i)),r=d.container===s||d.container===t?n:e(d.container),0===d.event.indexOf("scroll")&&r.bind(d.event,function(){return o()}),this.each(function(){var t=this,a=e(t);t.loaded=!1,(a.attr("src")===s||!1===a.attr("src"))&&a.attr("src",d.placeholder),a.on("appear",function(){if(!this.loaded){if(d.appear){var s=l.length;d.appear.call(t,s,d)}e("<img />").bind("load",function(){var s=a.data(d.data_attribute);a.hide(),a.is("img")?a.attr("src",s):a.css("background-image","url('"+s+"')"),a[d.effect](d.effect_speed),t.loaded=!0;var n=e.grep(l,function(e){return!e.loaded});if(l=e(n),d.load){var i=l.length;d.load.call(t,i,d)}}).bind("error",function(){a.trigger("error")}).attr("src",a.data(d.data_attribute))}}),0!==d.event.indexOf("scroll")&&a.bind(d.event,function(){t.loaded||a.trigger("appear")})}),n.bind("resize",function(){o()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(a).ready(function(){o()}),this},e.belowthefold=function(a,i){return(i.container===s||i.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(i.container).offset().top+e(i.container).height())<=e(a).offset().top-i.threshold},e.rightoffold=function(a,i){return(i.container===s||i.container===t?n.width()+n.scrollLeft():e(i.container).offset().left+e(i.container).width())<=e(a).offset().left-i.threshold},e.abovethetop=function(a,i){return(i.container===s||i.container===t?n.scrollTop():e(i.container).offset().top)>=e(a).offset().top+i.threshold+e(a).height()},e.leftofbegin=function(a,i){return(i.container===s||i.container===t?n.scrollLeft():e(i.container).offset().left)>=e(a).offset().left+i.threshold+e(a).width()},e.inviewport=function(t,a){return!(e.rightoffold(t,a)||e.leftofbegin(t,a)||e.belowthefold(t,a)||e.abovethetop(t,a))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(e){function t(e,t){return function(a){return l(e.call(this,a),t)}}function a(e){return function(t){return this.lang().ordinal(e.call(this,t))}}function s(){}function n(e){o(this,e)}function i(e){var t=this._data={},a=e.years||e.year||e.y||0,s=e.months||e.month||e.M||0,n=e.weeks||e.week||e.w||0,i=e.days||e.day||e.d||0,o=e.hours||e.hour||e.h||0,l=e.minutes||e.minute||e.m||0,d=e.seconds||e.second||e.s||0,c=e.milliseconds||e.millisecond||e.ms||0;this._milliseconds=c+1e3*d+6e4*l+36e5*o,this._days=i+7*n,this._months=s+12*a,t.milliseconds=c%1e3,d+=r(c/1e3),t.seconds=d%60,l+=r(d/60),t.minutes=l%60,o+=r(l/60),t.hours=o%24,i+=r(o/24),i+=7*n,t.days=i%30,s+=r(i/30),t.months=s%12,a+=r(s/12),t.years=a}function o(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function r(e){return 0>e?Math.ceil(e):Math.floor(e)}function l(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}function d(e,t,a){var s,n=t._milliseconds,i=t._days,o=t._months;n&&e._d.setTime(+e+n*a),i&&e.date(e.date()+i*a),o&&(s=e.date(),e.date(1).month(e.month()+o*a).date(Math.min(s,e.daysInMonth())))}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function h(e,t){var a,s=Math.min(e.length,t.length),n=Math.abs(e.length-t.length),i=0;for(a=0;s>a;a++)~~e[a]!=~~t[a]&&i++;return i+n}function p(e){return e?(!S[e]&&Y&&require("./lang/"+e),S[e]):C.fn._lang}function u(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function f(e,t){function a(t){return e.lang().longDateFormat(t)||t}for(var s=5;s--&&P.test(t);)t=t.replace(P,a);return G[t]||(G[t]=function(e){var t,a,s=e.match(F);for(t=0,a=s.length;a>t;t++)Z[s[t]]?s[t]=Z[s[t]]:s[t]=u(s[t]);return function(n){var i="";for(t=0;a>t;t++)i+="function"==typeof s[t].call?s[t].call(n,e):s[t];return i}}(t)),G[t](e)}function m(e){switch(e){case"DDDD":return H;case"YYYY":return I;case"YYYYY":return O;case"S":case"SS":case"SSS":case"DDD":return T;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return j;case"X":return B;case"Z":case"ZZ":return R;case"T":return z;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return L;default:return new RegExp(e.replace("\\",""))}}function g(e,t,a){var s,n=a._a;switch(e){case"M":case"MM":n[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":null!=(s=p(a._l).monthsParse(t))?n[1]=s:a._isValid=!1;break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(n[2]=~~t);break;case"YY":n[0]=~~t+(~~t>68?1900:2e3);break;case"YYYY":case"YYYYY":n[0]=~~t;break;case"a":case"A":a._isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+t));break;case"X":a._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":a._useUTC=!0,(s=(t+"").match(N))&&s[1]&&(a._tzh=~~s[1]),s&&s[2]&&(a._tzm=~~s[2]),s&&"+"===s[0]&&(a._tzh=-a._tzh,a._tzm=-a._tzm)}null==t&&(a._isValid=!1)}function v(e){var t,a,s=[];if(!e._d){for(t=0;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];s[3]+=e._tzh||0,s[4]+=e._tzm||0,a=new Date(0),e._useUTC?(a.setUTCFullYear(s[0],s[1],s[2]),a.setUTCHours(s[3],s[4],s[5],s[6])):(a.setFullYear(s[0],s[1],s[2]),a.setHours(s[3],s[4],s[5],s[6])),e._d=a}}function w(e){var t,a,s=e._f.match(F),n=e._i;for(e._a=[],t=0;t<s.length;t++)(a=(m(s[t]).exec(n)||[])[0])&&(n=n.slice(n.indexOf(a)+a.length)),Z[s[t]]&&g(s[t],a,e);e._isPm&&e._a[3]<12&&(e._a[3]+=12),!1===e._isPm&&12===e._a[3]&&(e._a[3]=0),v(e)}function y(t){var a=t._i,s=A.exec(a);a===e?t._d=new Date:s?t._d=new Date(+s[1]):"string"==typeof a?function(e){var t,a=e._i;if(V.exec(a)){for(e._f="YYYY-MM-DDT",t=0;4>t;t++)if(W[t][1].exec(a)){e._f+=W[t][0];break}R.exec(a)&&(e._f+=" Z"),w(e)}else e._d=new Date(a)}(t):c(a)?(t._a=a.slice(0),v(t)):t._d=a instanceof Date?new Date(+a):new Date(a)}function k(e,t,a){var s=a-t,n=a-e.day();return n>s&&(n-=7),s-7>n&&(n+=7),Math.ceil(C(e).add("d",n).dayOfYear()/7)}function $(e){var t=e._i,a=e._f;return null===t||""===t?null:("string"==typeof t&&(e._i=t=p().preparse(t)),C.isMoment(t)?(e=o({},t))._d=new Date(+t._d):a?c(a)?function(e){for(var t,a,s,i,r=99;e._f.length;){if((t=o({},e))._f=e._f.pop(),w(t),(a=new n(t)).isValid()){s=a;break}r>(i=h(t._a,a.toArray()))&&(r=i,s=a)}o(e,s)}(e):w(e):y(e),new n(e))}function b(e,t){C.fn[e]=C.fn[e+"s"]=function(e){var a=this._isUTC?"UTC":"";return null!=e?(this._d["set"+a+t](e),this):this._d["get"+a+t]()}}function D(e){C.duration.fn[e]=function(){return this._data[e]}}function _(e,t){C.duration.fn["as"+e]=function(){return+this/t}}for(var C,x,M=Math.round,S={},Y="undefined"!=typeof module&&module.exports,A=/^\/?Date\((\-?\d+)/i,F=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,P=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,L=/\d\d?/,T=/\d{1,3}/,H=/\d{3}/,I=/\d{1,4}/,O=/[+\-]?\d{1,6}/,j=/[0-9]*[a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF]+\s*?[\u0600-\u06FF]+/i,R=/Z|[\+\-]\d\d:?\d\d/i,z=/T/i,B=/[\+\-]?\d+(\.\d{1,3})?/,V=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,W=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],N=/([\+\-]|\d\d)/gi,E="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),U={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},G={},q="DDD w W M D d".split(" "),J="M D H h m s w W".split(" "),Z={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return l(~~(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(e/60),2)+":"+l(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+l(~~(10*e/6),4)},X:function(){return this.unix()}};q.length;)x=q.pop(),Z[x+"o"]=a(Z[x]);for(;J.length;)x=J.pop(),Z[x+x]=t(Z[x],2);for(Z.DDDD=t(Z.DDD,3),s.prototype={set:function(e){var t,a;for(a in e)"function"==typeof(t=e[a])?this[a]=t:this["_"+a]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,a,s;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(a=C([2e3,t]),s="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[t]=new RegExp(s.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},meridiem:function(e,t,a){return e>11?a?"pm":"PM":a?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var a=this._calendar[e];return"function"==typeof a?a.apply(t):a},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,a,s){var n=this._relativeTime[a];return"function"==typeof n?n(e,t,a,s):n.replace(/%d/i,e)},pastFuture:function(e,t){var a=this._relativeTime[e>0?"future":"past"];return"function"==typeof a?a(t):a.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return k(e,this._week.dow,this._week.doy)},_week:{dow:0,doy:6}},(C=function(e,t,a){return $({_i:e,_f:t,_l:a,_isUTC:!1})}).utc=function(e,t,a){return $({_useUTC:!0,_isUTC:!0,_l:a,_i:e,_f:t})},C.unix=function(e){return C(1e3*e)},C.duration=function(e,t){var a,s=C.isDuration(e),n="number"==typeof e,o=s?e._data:n?{}:e;return n&&(t?o[t]=e:o.milliseconds=e),a=new i(o),s&&e.hasOwnProperty("_lang")&&(a._lang=e._lang),a},C.version="2.0.0",C.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",C.lang=function(e,t){return e?(t?function(e,t){t.abbr=e,S[e]||(S[e]=new s),S[e].set(t),S[e]}(e,t):S[e]||p(e),void(C.duration.fn._lang=C.fn._lang=p(e))):C.fn._lang._abbr},C.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),p(e)},C.isMoment=function(e){return e instanceof n},C.isDuration=function(e){return e instanceof i},C.fn=n.prototype={clone:function(){return C(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._d},toJSON:function(){return C.utc(this).format("YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return null==this._isValid&&(this._a?this._isValid=!h(this._a,(this._isUTC?C.utc(this._a):C(this._a)).toArray()):this._isValid=!isNaN(this._d.getTime())),!!this._isValid},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){var t=f(this,e||C.defaultFormat);return this.lang().postformat(t)},add:function(e,t){return d(this,"string"==typeof e?C.duration(+t,e):C.duration(e,t),1),this},subtract:function(e,t){return d(this,"string"==typeof e?C.duration(+t,e):C.duration(e,t),-1),this},diff:function(e,t,a){var s,n,i=this._isUTC?C(e).utc():C(e).local(),o=6e4*(this.zone()-i.zone());return t&&(t=t.replace(/s$/,"")),"year"===t||"month"===t?(s=432e5*(this.daysInMonth()+i.daysInMonth()),n=12*(this.year()-i.year())+(this.month()-i.month()),n+=(this-C(this).startOf("month")-(i-C(i).startOf("month")))/s,"year"===t&&(n/=12)):(s=this-i-o,n="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?s/864e5:"week"===t?s/6048e5:s),a?n:r(n)},from:function(e,t){return C.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(C(),e)},calendar:function(){var e=this.diff(C().startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){var e=this.year();return e%4==0&&e%100!=0||e%400==0},isDST:function(){return this.zone()<C([this.year()]).zone()||this.zone()<C([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e=e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.day(0),this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},isAfter:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)>+C(e).startOf(t)},isBefore:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)<+C(e).startOf(t)},isSame:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)==+C(e).startOf(t)},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return C.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(e){var t=M((C(this).startOf("day")-C(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},isoWeek:function(e){var t=k(this,1,4);return null==e?t:this.add("d",7*(e-t))},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},lang:function(t){return t===e?this._lang:(this._lang=p(t),this)}},x=0;x<E.length;x++)b(E[x].toLowerCase().replace(/s$/,""),E[x]);for(x in b("year","FullYear"),C.fn.days=C.fn.day,C.fn.weeks=C.fn.week,C.fn.isoWeeks=C.fn.isoWeek,C.duration.fn=i.prototype={weeks:function(){return r(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,a=function(e,t,a){var s=M(Math.abs(e)/1e3),n=M(s/60),i=M(n/60),o=M(i/24),r=M(o/365),l=45>s&&["s",s]||1===n&&["m"]||45>n&&["mm",n]||1===i&&["h"]||22>i&&["hh",i]||1===o&&["d"]||25>=o&&["dd",o]||45>=o&&["M"]||345>o&&["MM",M(o/30)]||1===r&&["y"]||["yy",r];return l[2]=t,l[3]=e>0,l[4]=a,function(e,t,a,s,n){return n.relativeTime(t||1,!!a,e,s)}.apply({},l)}(t,!e,this.lang());return e&&(a=this.lang().pastFuture(t,a)),this.lang().postformat(a)},lang:C.fn.lang},U)U.hasOwnProperty(x)&&(_(x,U[x]),D(x.toLowerCase()));_("Weeks",6048e5),C.lang("en",{ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),Y&&(module.exports=C),"undefined"==typeof ender&&(this.moment=C),"function"==typeof define&&define.amd&&define("moment",[],function(){return C})}.call(this),function(e){"use strict";function t(t,a){this.$element=e(t),this.options=e.extend({},this.defaults,a),this.options.multiple="multiple"==this.$element.attr("multiple"),this.$button=e('<button type="button" class="selectable dropdown-toggle '+this.options.buttonClass+'" data-toggle="dropdown">'+this.options.buttonText(this.getSelectedOptions(),this.$element)+"</button>"),this.$dropdown=e('<div class="selectable-container dropdown-menu"></div>'),this.options.multiple?this.$dropdown.addClass("multi"):this.$dropdown.addClass("single"),this.$optionsContainer=e('<div class="options-container" />'),this.initOptions(),this.options.showChosenBox&&(this.$optionsSummary=e("<fieldset />").addClass("options-summary").append(e("<legend />").text(this.options.chosenFieldsetLabel)).hide().appendTo(this.$optionsContainer)),this.$dropdown.append(this.$optionsContainer),this.options.enableFiltering&&this.initFilter(),this.$container=e(this.options.buttonContainer).append(this.$button).append(this.$dropdown),this.bindEvents(),this.options.showChosenBox&&this.fillChosenBox(),this.$element.hide().after(this.$container)}Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null==this)throw new TypeError;var t,a,s=Object(this),n=s.length>>>0;if(0===n)return-1;if(t=0,arguments.length>1&&((t=Number(arguments[1]))!=t?t=0:0!=t&&t!=1/0&&t!=-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=n)return-1;for(a=t>=0?t:Math.max(n-Math.abs(t),0);n>a;a++)if(a in s&&s[a]===e)return a;return-1}),t.prototype={constructor:t,defaults:{defaultValue:null,showChosenBox:!1,enableFiltering:!1,caseSensitiveFiltering:!1,showSelectAll:!1,preventInputChangeEvent:!0,buttonContainer:'<div class="btn-group selectable" />',buttonClass:"btn",selectedClass:"active",chosenFieldsetLabel:"Summary",noMatchInfo:"No matches found",buttonText:function(t,a){if(0==t.length)return'None selected <b class="caret"></b>';if(t.length>3)return t.length+' selected <b class="caret"></b>';var s="";return t.each(function(){var t=void 0!==e(this).attr("label")?e(this).attr("label"):e(this).text();s+=t+", "}),s.substr(0,s.length-2)+' <b class="caret"></b>'},afterChange:function(e,t){},afterFilter:function(e,t){},afterKeyPressed:function(e,t){},afterListItemCreate:function(e,t){return t}},getSelectedOptions:function(){var t=[];return e("option:selected:not(:disabled)",this.$element).filter(function(a){return!(!this.value.length||-1!==e.inArray(this.value,t))&&(t.push(this.value),!0)})},getSelectedListItems:function(){var t=[];return this.$optionsContainer.find(":not(li:not(.option-disabled)").filter(function(t){return e(this).find("input").prop("checked")}).filter(function(a){var s=e(this).find("input").attr("value");return-1===e.inArray(s,t)&&(t.push(s),!0)})},updateButtonText:function(){this.$button.html(this.options.buttonText(this.getSelectedOptions(),this.$element))},unselectAll:function(){this.$element.val(null!==this.options.defaultValue&&this.options.defaultValue).trigger("changed.selectable")},fillChosenBox:function(t){if(this.options.showChosenBox){if(this.$optionsSummary.children(":not(legend)").remove(),(t=t||this.getSelectedListItems()).length){for(var a=e("<ul />"),s=0;s<t.length;s++)e(t[s]).clone().removeClass("focused").appendTo(a);this.$optionsSummary.append(a)}this.$optionsSummary.toggle(!!t.length)}},initFilter:function(){var t=e('<div class="options-filter-container" />'),a=e('<input class="options-filter-input" type="text" />').appendTo(t);this.$dropdown.prepend(t),a.on("keyup",e.proxy(function(s){9!=s.keyCode&&27!=s.keyCode||!this.$container.hasClass("open")?13===s.keyCode&&this.$optionsContainer.find(".focused").length?this.$optionsContainer.find(".focused input").click():(this.$dropdown.find(".options-filter-no-matches").remove(),this.$optionsContainer.find("fieldset").each(e.proxy(function(t,s){e(s).find("li:not(.unavailable)").each(e.proxy(function(t,s){var n=e(s),i=n.find("input"),o=!1;this.options.caseSensitiveFiltering&&i.attr("value").indexOf(a.val())>=0||!this.options.caseSensitiveFiltering&&i.attr("value").toLowerCase().indexOf(a.val().toLowerCase())>=0?o=!0:(this.options.caseSensitiveFiltering&&n.find("label").text().indexOf(a.val())>=0||!this.options.caseSensitiveFiltering&&n.find("label").text().toLowerCase().indexOf(a.val().toLowerCase())>=0)&&(o=!0),n.toggleClass("option-disabled",!o)},this)),e(s).find("li:not(.option-disabled)").length?e(s).show():e(s).hide()},this)),this.$optionsContainer.find(".ungrouped-list li:not(.unavailable)").each(e.proxy(function(t,s){var n=e(s),i=n.find("input"),o=!1;this.options.caseSensitiveFiltering&&i.attr("value").indexOf(a.val())>=0||!this.options.caseSensitiveFiltering&&i.attr("value").toLowerCase().indexOf(a.val().toLowerCase())>=0?o=!0:(this.options.caseSensitiveFiltering&&n.find("label").text().indexOf(a.val())>=0||!this.options.caseSensitiveFiltering&&n.find("label").text().toLowerCase().indexOf(a.val().toLowerCase())>=0)&&(o=!0),n.toggleClass("option-disabled",!o)},this)),this.$optionsContainer.find(".focused").length&&!this.$optionsContainer.find(".focused:not(.option-disabled)").length&&(this.removeListElementFocus(),this.addFocusOnListElement(this.$optionsContainer.find("li:visible:first"))),this.$optionsContainer.find("li:visible").length||e("<fieldset />").addClass("options-filter-no-matches").text(this.options.noMatchInfo).insertAfter(t),this.options.afterFilter(a,this.$element)):(a.blur(),this.removeListElementFocus())},this)),a.on("click change",function(e){e.stopPropagation()}),e(document).on("click.dropdown.data-api,","[data-toggle=dropdown],[class=search-combobox]",e.proxy(function(e){e.target===this.$button[0]&&this.$dropdown.is(":visible")&&a.focus().select()},this))},initOptions:function(){var t=e("<ul />").addClass("ungrouped-list");this.$element.children().each(e.proxy(function(a,s){var n=e(s).prop("tagName").toLowerCase();if("optgroup"==n){var i=s,o=e(i).prop("label"),r=e("<fieldset />");("Alfabetycznie"===o||"A to Z"===o||"От А до Я"===o||"Abecedně"===o)&&r.addClass("sort-alphabetically"),r.append("<legend />").append("<ul />"),e("legend",r).text(o),e("option",i).each(e.proxy(function(e,t){this.createListItem(t,r.find("ul"))},this)),this.$optionsContainer.append(r)}else"option"==n&&this.createListItem(s,t);t.find("li").length&&this.$optionsContainer.append(t)},this))},createListItem:function(t,a){a=a||this.$optionsContainer;var s=e(t),n=s.data("label")||s.text(),i=e("<li />").append(e("<label />").text(" "+n).prepend(e("<input />").attr("type",this.options.multiple?"checkbox":"radio").val(s.val()).prop("checked",s.is(":selected"))));s.is(":selected")&&(s.attr("selected","selected").prop("selected",!0),this.options.selectedClass&&i.addClass(this.options.selectedClass)),i=this.options.afterListItemCreate(s,i),a.append(i)},bindEvents:function(){e(this.$optionsContainer).on("click",function(t){t.stopPropagation(),e(t.target).blur()}),this.$optionsContainer.on("change",":input",e.proxy(function(t){var a=e(t.target),s=a.prop("checked")||!1;return this.options.multiple||this.$optionsContainer.find("input").not(a).prop("checked",!1),this.options.selectedClass&&(this.$optionsContainer.find('li input[value="'+a.val()+'"]').prop("checked",s).closest("li").toggleClass(this.options.selectedClass,s),this.$optionsContainer.trigger("multiselect-extend-after",[a,"after!! text from select"]),this.options.multiple||this.$optionsContainer.find('li input[value!="'+a.val()+'"]').prop("checked",!1).closest("li").toggleClass(this.options.selectedClass,!1)),this.options.multiple?this.$element.find('option[value="'+a.val()+'"]').prop("selected",s):this.$element.val(a.val()),this.$element.change(),this.options.afterChange(a,this.$element),this.options.multiple||this.$container.removeClass("open"),!this.options.preventInputChangeEvent&&void 0},this)),this.$element.on("change",e.proxy(function(t){this.updateButtonText(),this.fillChosenBox(),this.refreshListSelection(),this.options.afterChange(e(t.target),this.$element)},this)),this.$element.on("changed.selectable",e.proxy(function(t){this.refreshListSelection(),this.$element.change(),this.options.afterChange(e(t.target),this.$element)},this)),this.keysBinding()},refreshListSelection:function(){var t=this;e("option",this.$element).each(function(){var a=e(this).prop("selected")||!1;t.$optionsContainer.find('li input[value="'+e(this).attr("value")+'"]').prop("checked",a).closest("li").toggleClass(t.options.selectedClass,a)})},keysBinding:function(){this.$container.on("keydown",e.proxy(function(t){if(!e('input[type="text"]',this.$container).is(":focus")||38===t.keyCode||40===t.keyCode)if(9!=t.keyCode&&27!=t.keyCode||!this.$container.hasClass("open")){var a=this.$optionsContainer.find("li:visible");if(!a.length)return;var s=a.index(a.filter(".focused"));if(38==t.keyCode&&s>0?s--:38==t.keyCode&&0===s?(this.removeListElementFocus(),s=-1):40==t.keyCode&&s<a.length-1&&s++,s>=0){var n=a.eq(s);if(this.removeListElementFocus(),this.addFocusOnListElement(n),32==t.keyCode||!this.options.enableFiltering&&13==t.keyCode){var i=n.find("input");i.prop("checked",!i.prop("checked")),i.change()}this.options.afterKeyPressed(t,n),t.stopPropagation(),t.preventDefault()}}else this.removeListElementFocus()},this))},removeListElementFocus:function(){this.$optionsContainer.find("li").removeClass("focused"),this.$optionsContainer.find("li").css("background")},addFocusOnListElement:function(e){e.addClass("focused").focus()}},e.fn.selectable=function(a,s){return this.each(function(){var n=e(this).data("select"),i="object"==typeof a&&a;n||e(this).data("selectable",n=new t(this,i)),"string"==typeof a&&n[a](s)})},e.fn.selectable.Constructor=t}(window.jQuery),function(e){var t=function(){var t={years:"datepickerViewYears",moths:"datepickerViewMonths",days:"datepickerViewDays"},a={wrapper:'<div class="datepicker"><div class="datepickerBorderT" /><div class="datepickerBorderB" /><div class="datepickerBorderL" /><div class="datepickerBorderR" /><div class="datepickerBorderTL" /><div class="datepickerBorderTR" /><div class="datepickerBorderBL" /><div class="datepickerBorderBR" /><div class="datepickerContainer"><table cellspacing="0" cellpadding="0"><tbody><tr></tr></tbody></table></div></div>',head:['<td class="datepickerBlock">','<table cellspacing="0" cellpadding="0">',"<thead>","<tr>",'<th colspan="7"><a class="datepickerGoPrev" href="#"><i class="icon-arrow-left"></i></a>','<a class="datepickerMonth" href="#"><span></span></a>','<a class="datepickerGoNext" href="#"><i class="icon-arrow-right"></i></a></th>',"</tr>",'<tr class="datepickerDoW">',"<th><span><%=day1%></span></th>","<th><span><%=day2%></span></th>","<th><span><%=day3%></span></th>","<th><span><%=day4%></span></th>","<th><span><%=day5%></span></th>","<th><span><%=day6%></span></th>","<th><span><%=day7%></span></th>","</tr>","</thead>","</table></td>"],space:'<td class="datepickerSpace"><div></div></td>',days:['<tbody class="datepickerDays">',"<tr>",'<td class="<%=weeks[0].days[0].classname%>"><a href="#"><span><%=weeks[0].days[0].text%></span></a></td>','<td class="<%=weeks[0].days[1].classname%>"><a href="#"><span><%=weeks[0].days[1].text%></span></a></td>','<td class="<%=weeks[0].days[2].classname%>"><a href="#"><span><%=weeks[0].days[2].text%></span></a></td>','<td class="<%=weeks[0].days[3].classname%>"><a href="#"><span><%=weeks[0].days[3].text%></span></a></td>','<td class="<%=weeks[0].days[4].classname%>"><a href="#"><span><%=weeks[0].days[4].text%></span></a></td>','<td class="<%=weeks[0].days[5].classname%>"><a href="#"><span><%=weeks[0].days[5].text%></span></a></td>','<td class="<%=weeks[0].days[6].classname%>"><a href="#"><span><%=weeks[0].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[1].days[0].classname%>"><a href="#"><span><%=weeks[1].days[0].text%></span></a></td>','<td class="<%=weeks[1].days[1].classname%>"><a href="#"><span><%=weeks[1].days[1].text%></span></a></td>','<td class="<%=weeks[1].days[2].classname%>"><a href="#"><span><%=weeks[1].days[2].text%></span></a></td>','<td class="<%=weeks[1].days[3].classname%>"><a href="#"><span><%=weeks[1].days[3].text%></span></a></td>','<td class="<%=weeks[1].days[4].classname%>"><a href="#"><span><%=weeks[1].days[4].text%></span></a></td>','<td class="<%=weeks[1].days[5].classname%>"><a href="#"><span><%=weeks[1].days[5].text%></span></a></td>','<td class="<%=weeks[1].days[6].classname%>"><a href="#"><span><%=weeks[1].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[2].days[0].classname%>"><a href="#"><span><%=weeks[2].days[0].text%></span></a></td>','<td class="<%=weeks[2].days[1].classname%>"><a href="#"><span><%=weeks[2].days[1].text%></span></a></td>','<td class="<%=weeks[2].days[2].classname%>"><a href="#"><span><%=weeks[2].days[2].text%></span></a></td>','<td class="<%=weeks[2].days[3].classname%>"><a href="#"><span><%=weeks[2].days[3].text%></span></a></td>','<td class="<%=weeks[2].days[4].classname%>"><a href="#"><span><%=weeks[2].days[4].text%></span></a></td>','<td class="<%=weeks[2].days[5].classname%>"><a href="#"><span><%=weeks[2].days[5].text%></span></a></td>','<td class="<%=weeks[2].days[6].classname%>"><a href="#"><span><%=weeks[2].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[3].days[0].classname%>"><a href="#"><span><%=weeks[3].days[0].text%></span></a></td>','<td class="<%=weeks[3].days[1].classname%>"><a href="#"><span><%=weeks[3].days[1].text%></span></a></td>','<td class="<%=weeks[3].days[2].classname%>"><a href="#"><span><%=weeks[3].days[2].text%></span></a></td>','<td class="<%=weeks[3].days[3].classname%>"><a href="#"><span><%=weeks[3].days[3].text%></span></a></td>','<td class="<%=weeks[3].days[4].classname%>"><a href="#"><span><%=weeks[3].days[4].text%></span></a></td>','<td class="<%=weeks[3].days[5].classname%>"><a href="#"><span><%=weeks[3].days[5].text%></span></a></td>','<td class="<%=weeks[3].days[6].classname%>"><a href="#"><span><%=weeks[3].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[4].days[0].classname%>"><a href="#"><span><%=weeks[4].days[0].text%></span></a></td>','<td class="<%=weeks[4].days[1].classname%>"><a href="#"><span><%=weeks[4].days[1].text%></span></a></td>','<td class="<%=weeks[4].days[2].classname%>"><a href="#"><span><%=weeks[4].days[2].text%></span></a></td>','<td class="<%=weeks[4].days[3].classname%>"><a href="#"><span><%=weeks[4].days[3].text%></span></a></td>','<td class="<%=weeks[4].days[4].classname%>"><a href="#"><span><%=weeks[4].days[4].text%></span></a></td>','<td class="<%=weeks[4].days[5].classname%>"><a href="#"><span><%=weeks[4].days[5].text%></span></a></td>','<td class="<%=weeks[4].days[6].classname%>"><a href="#"><span><%=weeks[4].days[6].text%></span></a></td>',"</tr>","<tr>",'<td class="<%=weeks[5].days[0].classname%>"><a href="#"><span><%=weeks[5].days[0].text%></span></a></td>','<td class="<%=weeks[5].days[1].classname%>"><a href="#"><span><%=weeks[5].days[1].text%></span></a></td>','<td class="<%=weeks[5].days[2].classname%>"><a href="#"><span><%=weeks[5].days[2].text%></span></a></td>','<td class="<%=weeks[5].days[3].classname%>"><a href="#"><span><%=weeks[5].days[3].text%></span></a></td>','<td class="<%=weeks[5].days[4].classname%>"><a href="#"><span><%=weeks[5].days[4].text%></span></a></td>','<td class="<%=weeks[5].days[5].classname%>"><a href="#"><span><%=weeks[5].days[5].text%></span></a></td>','<td class="<%=weeks[5].days[6].classname%>"><a href="#"><span><%=weeks[5].days[6].text%></span></a></td>',"</tr>","</tbody>"],months:['<tbody class="<%=className%>">',"<tr>",'<td colspan="2"><a href="#"><span><%=data[0]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[1]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[2]%></span></a></td>','<td colspan="1"><a href="#"><span><%=data[3]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[4]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[5]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[6]%></span></a></td>','<td colspan="1"><a href="#"><span><%=data[7]%></span></a></td>',"</tr>","<tr>",'<td colspan="2"><a href="#"><span><%=data[8]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[9]%></span></a></td>','<td colspan="2"><a href="#"><span><%=data[10]%></span></a></td>','<td colspan="1"><a href="#"><span><%=data[11]%></span></a></td>',"</tr>","</tbody>"]},s={date:null,current:null,inline:!1,mode:"single",calendars:1,starts:0,prev:"&#9664;",next:"&#9654;",view:"days",position:"bottom",showOn:"focus",onRenderCell:function(){return{}},onChange:function(){},onBeforeShow:function(){return!0},onAfterShow:function(){},onBeforeHide:function(){return!0},onAfterHide:function(){},locale:{daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]},extraHeight:!1,extraWidth:!1,lastSel:!1},n=function(t){var s,n,i,o,r,l,d,c=e(t).data("datepicker"),h=e(t),p=Math.floor(c.calendars/2),u=0;h.find("td>table tbody").remove();for(var f=0;f<c.calendars;f++){(s=new Date(c.current)).addMonths(-p+f),d=h.find("table").eq(f+1),0==f&&d.addClass("datepickerFirstView"),f==c.calendars-1&&d.addClass("datepickerLastView"),d.hasClass("datepickerViewDays")?g=s.getMonthName(!0)+", "+s.getFullYear():d.hasClass("datepickerViewMonths")?g=s.getFullYear():d.hasClass("datepickerViewYears")&&(g=s.getFullYear()-6+" - "+(s.getFullYear()+5)),d.find("thead tr:first th a:eq(1) span").text(g),g=s.getFullYear()-6,n={data:[],className:"datepickerYears"};for(var m=0;12>m;m++)n.data.push(g+m);l=tmpl(a.months.join(""),n),s.setDate(1),n={weeks:[],test:10},i=s.getMonth();var g=(s.getDay()-c.starts)%7;for(s.addDays(-(g+(0>g?7:0))),u=0;42>u;){o=parseInt(u/7,10),r=u%7,n.weeks[o]||(n.weeks[o]={days:[]}),n.weeks[o].days[r]={text:s.getDate(),classname:[]};var v=new Date;v.getDate()==s.getDate()&&v.getMonth()==s.getMonth()&&v.getYear()==s.getYear()&&n.weeks[o].days[r].classname.push("datepickerToday"),s>v&&n.weeks[o].days[r].classname.push("datepickerFuture"),i!=s.getMonth()&&(n.weeks[o].days[r].classname.push("datepickerNotInMonth"),n.weeks[o].days[r].classname.push("datepickerDisabled")),0==s.getDay()&&n.weeks[o].days[r].classname.push("datepickerSunday"),6==s.getDay()&&n.weeks[o].days[r].classname.push("datepickerSaturday");var w=c.onRenderCell(t,s),y=s.valueOf();c.date&&(!e.isArray(c.date)||c.date.length>0)&&(w.selected||c.date==y||e.inArray(y,c.date)>-1||"range"==c.mode&&y>=c.date[0]&&y<=c.date[1])&&n.weeks[o].days[r].classname.push("datepickerSelected"),w.disabled&&n.weeks[o].days[r].classname.push("datepickerDisabled"),w.className&&n.weeks[o].days[r].classname.push(w.className),n.weeks[o].days[r].classname=n.weeks[o].days[r].classname.join(" "),u++,s.addDays(1)}l=tmpl(a.days.join(""),n)+l,n={data:c.locale.monthsShort,className:"datepickerMonths"},l=tmpl(a.months.join(""),n)+l,d.append(l)}},i=function(t){var a=e(t).data("datepicker"),s=e("#"+a.id);if(!1===a.extraHeight){var n=e(t).find("div");a.extraHeight=n.get(0).offsetHeight+n.get(1).offsetHeight,a.extraWidth=n.get(2).offsetWidth+n.get(3).offsetWidth}var i=s.find("table:first").get(0),o=i.offsetWidth,r=i.offsetHeight;s.css({width:o+a.extraWidth+"px",height:r+a.extraHeight+"px"}).find("div.datepickerContainer").css({width:o+"px",height:r+"px"})},o=function(t){(e(t.target).is("span")||e(t.target).is("i"))&&(t.target=t.target.parentNode);var a=e(t.target);if(a.is("a")){if(t.target.blur(),a.hasClass("datepickerDisabled"))return!1;var s=e(this).data("datepicker"),i=a.parent(),o=i.parent().parent().parent(),l=e("table",this).index(o.get(0))-1,d=new Date(s.current),c=!1,h=!1,p=Math.floor(s.calendars/2);if(i.is("th"))a.hasClass("datepickerMonth")?(d.addMonths(l-p),"range"==s.mode?(s.date[0]=d.setHours(0,0,0,0).valueOf(),d.addDays(d.getMaxDays()-1),d.setHours(23,59,59,0),s.date[1]=d.valueOf(),h=!0,c=!0,s.lastSel=!1):1==s.calendars&&(o.eq(0).hasClass("datepickerViewDays")?(o.eq(0).toggleClass("datepickerViewDays datepickerViewMonths"),a.find("span").text(d.getFullYear())):o.eq(0).hasClass("datepickerViewMonths")?(o.eq(0).toggleClass("datepickerViewMonths datepickerViewYears"),a.find("span").text(d.getFullYear()-6+" - "+(d.getFullYear()+5))):o.eq(0).hasClass("datepickerViewYears")&&(o.eq(0).toggleClass("datepickerViewYears datepickerViewDays"),a.find("span").text(d.getMonthName(!0)+", "+d.getFullYear())))):i.parent().parent().is("thead")&&(o.eq(0).hasClass("datepickerViewDays")?s.current.addMonths(a.hasClass("datepickerGoPrev")?-1:1):o.eq(0).hasClass("datepickerViewMonths")?s.current.addYears(a.hasClass("datepickerGoPrev")?-1:1):o.eq(0).hasClass("datepickerViewYears")&&s.current.addYears(a.hasClass("datepickerGoPrev")?-12:12),h=!0);else if(i.is("td")&&!i.hasClass("datepickerDisabled")){if(o.eq(0).hasClass("datepickerViewMonths"))s.current.setMonth(o.find("tbody.datepickerMonths td").index(i)),s.current.setFullYear(parseInt(o.find("thead th a.datepickerMonth span").text(),10)),s.current.addMonths(p-l),o.eq(0).toggleClass("datepickerViewMonths datepickerViewDays");else if(o.eq(0).hasClass("datepickerViewYears"))s.current.setFullYear(parseInt(a.text(),10)),o.eq(0).toggleClass("datepickerViewYears datepickerViewMonths");else{var u=parseInt(a.text(),10);switch(d.addMonths(l-p),i.hasClass("datepickerNotInMonth")&&d.addMonths(u>15?-1:1),d.setDate(u),s.mode){case"multiple":u=d.setHours(0,0,0,0).valueOf(),e.inArray(u,s.date)>-1?e.each(s.date,function(e,t){return t==u?(s.date.splice(e,1),!1):void 0}):s.date.push(u);break;case"range":s.lastSel||(s.date[0]=d.setHours(0,0,0,0).valueOf()),(u=d.setHours(23,59,59,0).valueOf())<s.date[0]?(s.date[1]=s.date[0]+86399e3,s.date[0]=u-86399e3):s.date[1]=u,s.lastSel=!s.lastSel;break;default:s.date=d.valueOf()}c=!0}h=!0}h&&n(this),c&&s.onChange.apply(this,r(s))}return!1},r=function(t){var a=null;return"single"==t.mode?t.date&&(a=new Date(t.date)):(a=new Array,e(t.date).each(function(e,t){a.push(new Date(t))})),[a,t.el,t.current]},l=function(t){var a=e("#"+e(this).data("datepickerId"));if(!a.is(":visible")){var s=a.get(0),o=a.data("datepicker");if(o.onBeforeShow.apply(this,[s]),0==o.onBeforeShow.apply(this,[s]))return;n(s);var r=e(this).offset(),l=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}}(),c=r.top,h=r.left;switch(e.css(s,"display"),a.css({visibility:"hidden",display:"block"}),i(s),o.position){case"top":c-=s.offsetHeight;break;case"left":h-=s.offsetWidth;break;case"right":h+=this.offsetWidth;break;case"bottom":c+=this.offsetHeight}c+s.offsetHeight>l.t+l.h&&(c=r.top-s.offsetHeight),c<l.t&&(c=r.top+this.offsetHeight+s.offsetHeight),h+s.offsetWidth>l.l+l.w&&(h=r.left-s.offsetWidth),h<l.l&&(h=r.left+this.offsetWidth),a.css({visibility:"visible",display:"block",top:c+"px",left:h+"px"}),o.onAfterShow.apply(this,[a.get(0)]),e(document).bind("mousedown",{cal:a,trigger:this},d)}return!1},d=function(t){t.target==t.data.trigger||function(e,t,a){if(e==t)return!0;if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(t));for(var s=t.parentNode;s&&s!=a;){if(s==e)return!0;s=s.parentNode}return!1}(t.data.cal.get(0),t.target,t.data.cal.get(0))||0!=t.data.cal.data("datepicker").onBeforeHide.apply(this,[t.data.cal.get(0)])&&(t.data.cal.hide(),t.data.cal.data("datepicker").onAfterHide.apply(this,[t.data.cal.get(0)]),e(document).unbind("mousedown",d))},c=function(t,a){if("single"==t||a||(a=[]),a&&(!e.isArray(a)||a.length>0))if("single"!=t)if(e.isArray(a)){for(var s=0;s<a.length;s++)a[s]=new Date(a[s]).setHours(0,0,0,0).valueOf();"range"==t&&(1==a.length&&a.push(new Date(a[0])),a[1]=new Date(a[1]).setHours(23,59,59,0).valueOf())}else a=[new Date(a).setHours(0,0,0,0).valueOf()],"range"==t&&a.push(new Date(a[0]).setHours(23,59,59,0).valueOf());else a=new Date(a).setHours(0,0,0,0).valueOf();return a};return{init:function(r){return function(e){Date.prototype.tempDate||(Date.prototype.tempDate=null,Date.prototype.months=e.months,Date.prototype.monthsShort=e.monthsShort,Date.prototype.getMonthName=function(e){return this[e?"months":"monthsShort"][this.getMonth()]},Date.prototype.addDays=function(e){this.setDate(this.getDate()+e),this.tempDate=this.getDate()},Date.prototype.addMonths=function(e){null==this.tempDate&&(this.tempDate=this.getDate()),this.setDate(1),this.setMonth(this.getMonth()+e),this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.addYears=function(e){null==this.tempDate&&(this.tempDate=this.getDate()),this.setDate(1),this.setFullYear(this.getFullYear()+e),this.setDate(Math.min(this.tempDate,this.getMaxDays()))},Date.prototype.getMaxDays=function(){var e,t=new Date(Date.parse(this)),a=28;for(e=t.getMonth(),a=28;t.getMonth()==e;)a++,t.setDate(a);return a-1})}((r=e.extend({},s,r||{})).locale),r.calendars=Math.max(1,parseInt(r.calendars,10)||1),r.mode=/single|multiple|range/.test(r.mode)?r.mode:"single",this.each(function(){if(!e(this).data("datepicker")){r.el=this,r.date=c(r.mode,r.date),r.current?r.current=new Date(r.current):r.current=new Date,r.current.setDate(1),r.current.setHours(0,0,0,0);var s,d="datepicker_"+parseInt(1e3*Math.random());r.id=d,e(this).data("datepickerId",r.id);var h=e(a.wrapper).attr("id",d).bind("click",o).data("datepicker",r);r.className&&h.addClass(r.className);for(var p="",u=0;u<r.calendars;u++)s=r.starts,u>0&&(p+=a.space),p+=tmpl(a.head.join(""),{prev:r.prev,next:r.next,day1:r.locale.daysMin[s++%7],day2:r.locale.daysMin[s++%7],day3:r.locale.daysMin[s++%7],day4:r.locale.daysMin[s++%7],day5:r.locale.daysMin[s++%7],day6:r.locale.daysMin[s++%7],day7:r.locale.daysMin[s++%7]});h.find("tr:first").append(p).find("table").addClass(t[r.view]),n(h.get(0)),r.inline?(h.appendTo(this).show().css("position","relative"),i(h.get(0))):(h.appendTo(document.body),e(this).bind(r.showOn,l))}})},showPicker:function(){return this.each(function(){e(this).data("datepickerId")&&(e("#"+e(this).data("datepickerId")).data("datepicker").inline||l.apply(this))})},hidePicker:function(){return this.each(function(){e(this).data("datepickerId")&&(e("#"+e(this).data("datepickerId")).data("datepicker").inline||e("#"+e(this).data("datepickerId")).hide())})},setDate:function(t,a){return this.each(function(){if(e(this).data("datepickerId")){var s=e("#"+e(this).data("datepickerId")),i=s.data("datepicker");i.date=c(i.mode,t),a&&(itaka=new Date("single"!=i.mode?i.date[0]:i.date),itaka.addMonths(1),i.current=itaka),n(s.get(0))}})},getDate:function(){return this.size()>0?r(e("#"+e(this).data("datepickerId")).data("datepicker")):void 0},clear:function(){return this.each(function(){if(e(this).data("datepickerId")){var t=e("#"+e(this).data("datepickerId")),a=t.data("datepicker");"single"==a.mode?a.date=null:a.date=[],n(t.get(0))}})},fixLayout:function(){return this.each(function(){if(e(this).data("datepickerId")){var t=e("#"+e(this).data("datepickerId"));t.data("datepicker").inline&&i(t.get(0))}})}}}();e.fn.extend({DatePicker:t.init,DatePickerHide:t.hidePicker,DatePickerShow:t.showPicker,DatePickerSetDate:t.setDate,DatePickerGetDate:t.getDate,DatePickerClear:t.clear,DatePickerLayout:t.fixLayout})}(jQuery),function(){var e={};this.tmpl=function t(a,s){var n=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[a]=e[a]||t(document.getElementById(a).innerHTML);return s?n(s):n}}();var eventValidAdultsValues=["1","2","3"],eventValidChildsValues=["0","1"],eventFindHistoricWeatherUrl="/api_www/get/historic_weather",eventShowWeatherDetails="Информации о погоде",eventHideWeatherDetails="mniej szczegółów pogody",search_has_more=1,search_staticSelectedDestination=!1,search_childTitlePrefix="Ребенок",search_defaultSelectLabel="Любое",search_selectFilterNoMatches="brak wyników",search_selectChosenLabel="отборный",search_selectChosenCounter='<span class="chosen-count"><%- counter %></span> отборный',search_selectUnselectAll="Удалить выбор",search_labelAdultsSingle="<%= count %> dorosły",search_labelChildsSingle=" i <%= count %> dziecko",search_groupLabelPopular="Самые популярные",search_groupLabelAlphabetically="От А до Я",search_loadAjaxResults=1,search_hasMore=1,temp_value=!0;function formatDate(e){return e<10?"0"+e:e}var searchForm,criteoDynamicResults=!0,criteoSetSiteType="d",criteoCheckinDate=moment().format("YYYY-MM-DD"),criteoCheckOutDate="2018-04-30",SearchForm=function(e,t){"use strict";var a=$("#date-range"),s=$("#date_from"),n=$("#date_to"),i=s.add(n),o=$("#destination-select-popup"),r=$("#destination-select-popup"),l=$("#departures-select"),d=$("#filter-tabs"),c=$("#filter-input"),h=$("#order-menu"),p=$("#order-opener"),u=$("#order-input"),f=$("#price-types"),m=$("#view-types"),g=$("#price-type-input"),v=$("#cal-range"),w=$("#collapseFilterBtn"),y=null,k=($("html").attr("lang"),"31"),b=this;this.initAutoCompleteInput=function(e){e.children(":selected");var t=e.find("option"),a=$('<ul class="typeahead-all dropdown-menu"/>'),s=$("<button />").attr({tabIndex:-1,title:"Pokaż wszystko",class:"search-combobox"}),n=$("<input />").attr({type:"text",placeholder:e.data("placeholder"),"data-provide":"typeahead",value:""});e.hide(),n.insertAfter(e),a.css({left:n.offset().left+"px",top:n.offset().top+n.height()+"px"}),t.each(function(){if($(this).attr("value").length&&!$(this).is(":disabled")){var e=$(this).text(),t=$("<a />").attr("href","#").html(e);a.append($('<li data-value="'+$(this).attr("value")+'" />').append(t))}}),a.on("click","a",function(){var t=$(this).parent().data("value");return e.val(t).change(),n.val(e.find(":selected").text().replace("&emsp;","")).removeClass("placeholder"),a.hide(),!1}).on("mouseenter",function(){$(this).find(".active").removeClass("active")}).insertAfter(n),$("body").click(function(e){!a.is(":visible")||$(e.target).closest(a).length||$(e.target).closest(s).length||a.hide()}),s.click(function(e){a.children().removeClass("active selected"),a.children('[data-value="'+n.val()+'"]').addClass("active selected"),a.toggle(),b.initScroll(a),e.preventDefault()}).insertAfter(n),n.typeahead({items:1e3,source:function(e,a){n.data("typeahead").$menu.data("jsp",!1);var s=setInterval($.proxy(function(){this.$menu.is(":visible")&&("object"!=typeof this.$menu.data("jsp")&&(this.$menu.jScrollPane({showArrows:!0,horizontalGutter:30,verticalGutter:30,mouseWheelSpeed:30,contentWidth:"0px"}),this.$menu.height(this.$menu.data("jsp").getContentHeight()),this.$menu.data("jsp").reinitialise()),clearInterval(s))},this),50),i=[];return t.each(function(){if($(this).attr("value").length&&!$(this).is(":disabled")){$(this).text();i.push($(this).text().replace("&emsp;",""))}}),i},updater:function(a){return t.each(function(){if(a===$(this).text())return e.val($(this).attr("value")),!1}),a}}),e.on("change",function(){e.find(":selected").attr("value").length?n.val(e.find(":selected").text()):n.val("")}),n.on("change",function(){var t=$(this).val();e.val(""),t.length&&a.find("li").each(function(){if(!$(this).data("disabled")&&(t.toLowerCase()===$(this).text().toLowerCase().replace(/^\s+|\s+$/g,"")||t.toLowerCase()===$(this).data("value").toLowerCase()))return $(this).find("a").click(),!1})}),e.on("search.validate",function(t,s){e.children().each(function(){var e=$(this).attr("value"),t=e.split(",");0===_.intersection(s,t).length?($(this).attr("disabled",!0),a.find('li[data-value="'+e+'"]').data("disabled",!0).hide()):($(this).attr("disabled",!1),a.find('li[data-value="'+e+'"]').data("disabled",!1).show())})})},this.initDestinationInput=function(){this.initAutoCompleteInput(o)},this.initDepartureInput=function(){this.initAutoCompleteInput(l)},this.initSelectsChrome=function(){},this.initDropdownInput=function(e,t){e.hide().next().show(),e.parent().find(".dropdown-menu").on("click","a[data-value]",function(a){var s=$(this);s.closest(".dropdown-menu").find(".selected").removeClass("selected"),s.parent().addClass("active selected"),e.parent().find(".dropdown-toggle").text(void 0!==s.data("label")&&s.data("label").length?s.data("label"):s.text()),e.val(s.data("value")),"function"==typeof t&&t(e),e.change(),a.preventDefault()}).on("mouseenter",function(){$(this).find(".active:not(.item)").removeClass("active")}),e.on("search.validate",function(t,a){var s=e.next().find(".dropdown-menu");e.children().each(function(){if($(this).attr("value").length){var e=$(this).attr("value"),t=e.split(",");0===_.intersection(a,t).length?($(this).attr("disabled",!0),s.find('li a[data-value="'+e+'"]').closest("li").hide()):($(this).attr("disabled",!1),s.find('li a[data-value="'+e+'"]').closest("li").show())}})}),$(document).on("click.dropdown.data-api","[data-toggle=dropdown],[class=search-combobox]",function(){var t=$('[data-js-value="'+e.next().find("ul.dropdown-menu").data("js-value")+'"]');t.is(":visible")&&("object"!=typeof t.data("jsp")?(t.jScrollPane({showArrows:!0,horizontalGutter:30,verticalGutter:30,mouseWheelSpeed:30,contentWidth:"0px"}),t.on("click",".jspVerticalBar",function(e){e.stopPropagation()})):t.data("jsp").reinitialise(),t.height(t.data("jsp").getContentHeight()),t.data("jsp").reinitialise())})},this.initDropdownSelect=function(e,t,a,s,n){t=t||!1,a=a||!1,s=void 0!==s?s:null,n=n||!1;var i,o=$("<button />").addClass("unselect-all").html("&times;").attr("title",search_selectUnselectAll);function r(e,t){var a=t.data("selectable");if(a){var s=a.getSelectedOptions(),i=[];s.length?(s.each(function(){i.push($(this).data("label")||$(this).text())}),a.$button.attr("title",search_selectChosenLabel+": "+i.join(", ")),o.toggle(!n)):(a.$button.attr("title",""),o.toggle(!1))}}e.selectable({defaultValue:s,enableFiltering:t,showChosenBox:a,noMatchInfo:search_selectFilterNoMatches,chosenFieldsetLabel:search_selectChosenLabel,buttonText:function(e,t){if(0==e.length)return search_defaultSelectLabel;if(e.length>1)return _.template(search_selectChosenCounter)({counter:e.length});var a="";return e.each(function(){var e=void 0!==$(this).data("label")?$(this).data("label"):$(this).text();a+=e+", "}),(a=a.substr(0,a.length-2)).length>29&&(a=a.substr(0,29)+"&hellip;"),a},afterFilter:function(){i&&i.$optionsContainer.trigger("reinit.scrollpane")},afterKeyPressed:function(e,t){i&&i.$optionsContainer.trigger("reposition.scrollpane",{element:t})},afterListItemCreate:function(e,t){if(void 0!==e.data("description")&&e.data("description").length){var a=$("<span />").addClass("group-description");a.text(e.data("description")),t.find("label").append(a)}return void 0!==e.data("class")&&e.data("class").length&&t.addClass(e.data("class")),t},afterChange:r}),i=e.data("selectable"),o.hide().appendTo(e.prev()).on("click",function(e){i&&i.unselectAll(),e.preventDefault()}),r(0,e),e.on("search.validate",function(t,a){e.find("option").each(function(){if($(this).attr("value").length){var e=$(this).attr("value"),t=e.split(","),s=_.intersection(a,t).length>0;$(this).attr("disabled",!s),i&&i.$optionsContainer.find('li input[value="'+e+'"]').closest("li").toggleClass("option-disabled unavailable",!s)}}),i&&(i.$optionsContainer.find("fieldset").each(function(){$(this).toggle(!!$(this).find("li:not(.unavailable)").length)}),i.updateButtonText(),i.fillChosenBox(),r(0,e),i.$optionsContainer.trigger("reinit.scrollpane"))}),this.initScroll(e.next().find(".options-container")),$(".searchbig .affix-wrapper").show()},this.initDropdownMultiselect=function(e,t){t=t||!1,$.fn.multiselect&&e.multiselect({enableFiltering:t,enableCaseInsensitiveFiltering:t,filterBehavior:"both",preventInputChangeEvent:!0,buttonText:function(e,t){if(0===e.length)return t.find('option[value=""]').text();if(e.length>1)return e.length+" zaznaczone";var a="";return e.each(function(){var e=void 0!==$(this).attr("label")?$(this).attr("label"):$(this).text();a+=e+", "}),(a=a.substr(0,a.length-2)).length>21&&(a=a.substr(0,21)+"&hellip;"),a},onOptionCreate:function(e){return $(e).attr("value").toString().length>0}}),e.on("search.validate",function(t,a){var s=e.next().find(".dropdown-menu");e.children().each(function(){if($(this).attr("value").length){var e=$(this).attr("value"),t=e.split(",");0===_.intersection(a,t).length?($(this).attr("disabled",!0),s.find('li input[value="'+e+'"]').closest("li").hide()):($(this).attr("disabled",!1),s.find('li input[value="'+e+'"]').closest("li").show())}})}),this.initScroll(e.next().find("ul.dropdown-menu"))},this.initChildsInput=function(){this.initChildsAgesDatepicker(),this.initDropdownSelect($("#childs-select"),!1,!1,!1,!0),$("#childs-select").on("change",$.proxy(function(){this.childAgesCallback($("#childs-select"))},this))},this.initCookieChildrenDate=function(){var e=b.checkCookie("childDates");if(null!=e&&e.length>0){var t=":eq("+e.length+")";$("#childs-select").val($("#childs-select option"+t).val()),$("#childs-select option"+t).prop("selected",!0),$(".fKids").length>0&&$(".fKids a.btn").text(e.length),v.length>0&&$("#childs-select").next().find("ul li").each(function(t){$(this).hasClass("selected")&&$(this).removeClass("selected"),t===e.length&&$(this).addClass("selected")}),b.childAgesCallback($("#childs-select"))}null!=e&&$(".dropdown .datepicker input").each(function(t,a){e.length-1>=t&&$(this).val(e[t])})},this.resetCookie=function(){},this.saveCookieChildrenDate=function(){$("#childs-ages input").serialize()},this.checkCookie=function(e){if("undefined"!=typeof cookieChilds&&null!=cookieChilds)return cookieChilds.match(/\d\d\.\d\d\.\d\d\d\d/g)},this.replaceCookieInput=function(e){var t=b.checkCookie("childDates");void 0!==t&&null!=t&&$(".dropdown .datepicker input").each(function(e,a){t.length-1>=e&&$(this).val(t[e])})},this.initCookieFiltersTailsPrice=function(){return},this.initChildsAgesDatepicker=function(){$("#childs-ages > div input").datepicker({language:"ru",startView:2,format:"dd.mm.yyyy",startDate:"-16y",endDate:"-1d"}).on("changeDate",function(){b.saveCookieChildrenDate(this),$(this).datepicker("hide")}),$("#childs-ages").on("click",".datekids-opener",function(e){$(this).prev().datepicker("show"),e.preventDefault()})},this.childAgesCallback=function(e){var t=e.val();if(t>0){var a=$("#childs-ages > div").length;if(a<t)for(var s=a+1;s<=t;s++){var n=$("#childs-ages > div:last").clone();n.find("input").datepicker({language:"ru",format:"dd.mm.yyyy",startView:2,startDate:"-16y",endDate:"-1d"}).on("changeDate",function(){b.saveCookieChildrenDate(),$(this).datepicker("hide")}),n.find("label").text("Детей "+s),n.insertAfter($("#childs-ages > div:last"))}else for(var i=a-t;i--;)$("#childs-ages > div:last").remove();$("#childs-ages").is(":visible")||$("#childs-ages").slideDown()}else $("#childs-ages").slideUp()},this.initParticipantsInput=function(){var t=this;this.initChildsAgesDatepicker(),this.participantRecount(),$("#childs-select, #adults-select").on("change",function(e){t.participantRecount(),t.childAgesCallback($("#childs-select"))}),$(".fParticipants > .dropdown-menu").on("click",".childs-ages-commit",function(t){$(".fParticipants > .dropdown-toggle").data("childs",$("#childs-select").val()),$(".fParticipants > .dropdown-toggle").data("adults",$("#adults-select").val()),$(".fParticipants > .dropdown-toggle").dropdown("toggle"),e.submit(),t.preventDefault()}).on("click",".childs-ages-rollback",function(e){$("#childs-select").val($(".fParticipants > .dropdown-toggle").data("childs")).change(),$("#adults-select").val($(".fParticipants > .dropdown-toggle").data("adults")).change(),$(".fParticipants > .dropdown-toggle").dropdown("toggle"),e.preventDefault()}),$(".fParticipants > .dropdown-menu").on("click",function(e){e.stopPropagation()})},this.participantRecount=function(){var e,t=_.template(search_labelAdults),a=_.template(search_labelChilds);e=t({count:$("#adults-select").val()}),$("#childs-select").val()>0&&(e+=a({count:$("#childs-select").val()})),$("#participants-count").text(e)},this.initFilters=function(){d.on("click","a",function(e){$(this).parent().hasClass("active")||(c.val($(this).data("filter")).change(),d.children("li").removeClass("active"),$(this).parent().addClass("active")),e.preventDefault()})},this.initOrderInput=function(){h.on("click","a",function(e){var t=$(this);h.find("li").removeClass("active"),t.parent().addClass("active"),u.val(t.data("value")).change(),p.text(t.data("label")),e.preventDefault()}),h.find("a.active").click()},this.initPriceTypeInput=function(){f.on("click","a",function(e){var t=$(this);f.find("a").removeClass("active"),t.addClass("active"),g.val(t.data("value")).change(),e.preventDefault()}),"person"===g.val()?$(".pt_perperson a").addClass("active"):$(".pt_perfamily a").addClass("active")},this.initViewTypeInput=function(){m.on("click","a",function(e){var t=$(this);m.find("a").removeClass("active"),t.addClass("active").change(),$("#search-results").toggleClass("as-thumbs as-list"),e.preventDefault()})},this.initValidation=function(){var t=this;e.on("change",":input",function(e){t.validate()})},this.validate=function(){var a=_.reject(e.serializeArray(),function(e){return"page"===e.name});if(y&&y.abort(),$("#event-types").find("input:checked").val()===k)return!0;t&&t.indexOf("action=itaka_query")>-1&&(y=$.getJSON(t,a,function(e){y=null,o.trigger("searchmobile.validate",[e.data.mobileSelectOptions]),o.trigger("search.validate",[e.data.destinations]),l.trigger("search.validate",[e.data.from]),$("#foods-select").length&&$("#foods-select").trigger("search.validate",[e.data.foods]),o.trigger("searchmobile_afterajax.validate")}))},this.initDateInputs2=function(t,o){if(a&&a.length){var r=moment(a.data("enddaterange"),"DD-MM-YYYY"),l=moment().hour(0).minute(0).second(0),d=(moment(a.data("from"),"DD-MM-YYYY"),moment(a.data("to"),"DD-MM-YYYY"),moment(a.data("from"),"DD-MM-YYYY").add("month",1)),c=moment(a.data("to"),"DD-MM-YYYY").add("month",1),h=moment(a.data("from"),"DD-MM-YYYY"),p=moment(a.data("enddaterange"),"DD-MM-YYYY"),u="right",f="right",m="right",g="right",v=$(".searchbig").length>0,w=this,y=!1,b=["leftReady"];$('input[name="date_from"],input[name="date_to"]').on("change",function(e){$(e.target).is("#date_from")?$("#fDate-cal__from").DatePickerSetDate(moment(a.data("from"),"DD.MM.YYYY").toDate()):$("#fDate-cal__to").DatePickerSetDate(moment(a.data("to"),"DD.MM.YYYY").toDate()),M(e),e.preventDefault(),w.validate()}).on("click",function(e){}),$(".fDate-cal__from .popover-close,.fDate-cal__to .popover-close").on("click.calendar",function(e){$(this).dropdown("toggle"),C(!0),e.preventDefault()}),n.one("click.calendar",function(){if($("#event-types").find(".checked input").val()===k&&(y=!0),!v&&!y){var e=moment().hour(0).minute(0).second(0).add("month",1),t=moment($("#fDate-cal__from").DatePickerGetDate()[0]);t.isAfter(l)?(r.isBefore(t.add("month",1),"month")&&t.subtract("month",1),a.data("to",t.format("DD.MM.YYYY")),$("#fDate-cal__to").DatePickerSetDate(moment(t.toDate()),!0)):(a.data("to",e.format("DD.MM.YYYY")),$("#fDate-cal__to").DatePickerSetDate(moment(e.toDate()),!0)),p=t.clone(),x(),$('input[name="date_to"]').val(a.data("to")),n.val(a.data("to")).change()}if(!v&&y){var s=moment().hour(0).minute(0).second(0).add("day",1),i=moment($("#fDate-cal__from").DatePickerGetDate()[0]);i.isAfter(l)?(r.isBefore(i.add("day",1),"day")&&i.subtract("day",1),a.data("to",i.format("DD.MM.YYYY")),$("#fDate-cal__to").DatePickerSetDate(moment(i.toDate()),!0)):(a.data("to",s.format("DD.MM.YYYY")),$("#fDate-cal__to").DatePickerSetDate(moment(s.toDate()),!0)),p=i.clone(),x(),$('input[name="date_to"]').val(a.data("to")),n.val(a.data("to")).change()}}),$(document).on("click.dropdown-menu.data-api",function(){C(!0)}),i.on("click.infield",function(e){$(this).is("#date_from")?(b[0]="leftReady",C()):(b[0]="blocked",C())}),$("#fDate-cal__from").DatePicker({showOn:"click",inline:!0,starts:1,calendars:2,locale:_("ru"),mode:"single",current:d.toDate(),onRenderCell:function(e,t){var a="",s=!1;return r.isBefore(t)&&(a="datepickerEndSeason",s=!0),l.isAfter(t,"day")&&(a="datepickerPast ",s=!0),{selected:!1,disabled:s,className:a}},onChange:function(t,n){var i=moment($("#fDate-cal__from").DatePickerGetDate()[0]);if(h=i.clone(),i.isSame(p)||i.isAfter(p)){var o=i.clone();r.isBefore(o.add("month",1))&&(o.subtract("month",1),p=o.clone()),p=o.clone(),a.data("to",o.format("DD.MM.YYYY")),S(),$('input[name="date_to"]').val(a.data("to")),$("#fDate-cal__to").DatePickerSetDate(moment(a.data("to"),"DD.MM.YYYY").toDate(),!0),x(!0)}else $("#fDate-cal__to").DatePickerSetDate(moment(a.data("to"),"DD.MM.YYYY").toDate());a.data("from",i.format("DD.MM.YYYY")),C(!0),$("#fDate-open__from").dropdown("toggle"),function(){if(v&&$(window).width()>767){var t=D("from");s.val(t),e.submit()}else s.val(a.data("from"))}(),$('input[name="date_from"]').val(a.data("from")).change()}}),$("#fDate-cal__to").DatePicker({showOn:"click",inline:!0,starts:1,calendars:2,locale:_("ru"),mode:"single",current:c.toDate(),onRenderCell:function(e,t){var a="",s=!1;return r.isBefore(t)&&(a="datepickerEndSeason",s=!0),l.isAfter(t,"day")&&(a="datepickerPast ",s=!0),l.isSame(t,"day")&&(a="datepickerDisabled"),moment($("input[name=date_from]").val(),"DD-MM-YYYY").isSame(t,"days")&&(s=!0),h.isAfter(t,"days")&&(s=!0),{selected:!1,disabled:s,className:a}},onChange:function(e,t){var s=moment($("#fDate-cal__to").DatePickerGetDate()[0]);p=s.clone(),a.data("to",s.format("DD.MM.YYYY")),C(!0),$("#fDate-open__to").dropdown("toggle"),S(),$('input[name="date_to"]').val(a.data("to")).change()}}),$("#fDate-cal__from").DatePickerSetDate(moment(a.data("from"),"DD.MM.YYYY").toDate()),$("#fDate-cal__to").DatePickerSetDate(moment(a.data("to"),"DD.MM.YYYY").toDate()),v&&$(window).width(),x(),$("#fDate-cal__from,#fDate-cal__to").find(".datepicker").on("click.calendar","thead i",M)}function D(e){if("from"===e)var t=a.data("from").split(".");else t=a.data("to").split(".");return t[0]+"."+t[1]}function _(e){switch(e){case"ru":return{daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"]};case"pl":return{daysMin:["N","Pn","Wt","Śr","Cz","Pt","So"],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthsShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"]};case"en":return{daysMin:["S","M","T","W","T","F","S"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};case"lt":return{daysMin:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"],months:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}}}function C(e){if(void 0===e)switch(b[0]){case"leftReady":s.parent().addClass("placeholder-focus").removeClass("lightholder").removeClass("placeholder-hide"),n.parent().addClass("lightholder"),$(".infield-from,.infield-to").removeClass("blocked"),$(".searchbig .fRow > label:first").addClass("moveTerm"),n.parent().removeClass("placeholder-focus").addClass("placeholder-hide").addClass("lightholder");break;case"rightReady":n.parent().addClass("placeholder-focus").removeClass("lightholder").removeClass("placeholder-hide"),s.parent().addClass("placeholder-focus").addClass("lightholder").removeClass("placeholder-hide"),$(".infield-from,.infield-to").removeClass("blocked"),$(".searchbig .fRow > label:first").addClass("moveTerm");break;case"blocked":i.parent().addClass("placeholder-focus").removeClass("lightholder").removeClass("placeholder-hide"),$(".infield-from,.infield-to").addClass("blocked"),$(".searchbig .fRow > label:first").addClass("moveTerm"),s.parent().removeClass("placeholder-focus").addClass("placeholder-hide").addClass("lightholder")}else n.parent().removeClass("placeholder-focus").addClass("placeholder-hide").addClass("lightholder"),s.parent().removeClass("placeholder-focus").addClass("placeholder-hide").addClass("lightholder"),$(".searchbig").length>0&&$(".infield-from,.infield-to").removeClass("blocked"),$(".fRow > label:first").removeClass("moveTerm")}function x(e){var t=moment($("#fDate-cal__from").DatePickerGetDate()[2]),a=moment($("#fDate-cal__to").DatePickerGetDate()[2]);function s(e,t){l.isAfter(t,"year")&&l.isAfter(t.subtract("month",2),"month")&&e.find(".datepickerBlock:first .datepickerGoPrev").addClass("icon-arrow-none"),r.isBefore(t,"year")&&r.isBefore(t.add("month",2),"month")&&e.find(".datepickerBlock:last .datepickerGoNext").addClass("icon-arrow-none")}e||s($("#fDate-cal__from"),t),s($("#fDate-cal__to"),a)}function M(e){var t=$(this);$(this).closest(".datepicker").parent().is("#fDate-cal__from")?u=$(this).hasClass("icon-arrow-right")?"right":"left":m=$(this).hasClass("icon-arrow-right")?"right":"left";var a=moment($("#fDate-cal__from").DatePickerGetDate()[2]),s=moment($("#fDate-cal__to").DatePickerGetDate()[2]);function n(e,a,s){("right"===e&&"right"===a||"right"===e&&"left"===a)&&(r.isBefore(s.add("month",2),"month")?t.parent().addClass("icon-arrow-none"):t.closest("tbody").find(".datepickerBlock:first .datepickerGoPrev").removeClass("icon-arrow-none")),("left"===e&&"left"===a||"left"===e&&"right"===a)&&(l.isAfter(s.subtract("month",3),"month")?t.parent().addClass("icon-arrow-none"):t.closest("tbody").find(".datepickerBlock:last .datepickerGoNext").removeClass("icon-arrow-none")),"left"===e&&"right"===a&&t.closest("tbody").find(".datepickerBlock:last .datepickerGoNext").removeClass("icon-arrow-none")}$(this).closest(".datepicker").parent().is("#fDate-cal__from")?(n(u,f,a),f=u):(n(m,g,s),g=m)}function S(){if(v&&$(window).width()>767){var t=D("to");n.val(t),e.submit()}else n.val(a.data("to"))}},this.initFiltersToggle=function(){function e(){var e=$("#search-form").width(),t=$(".fRow:first").width(),a=($(".searchbig .fRow").length,Math.floor(e/t)),s=$(".searchbig .fRow").filter(function(){return"none"!==$(this).css("display")}).length;$(".filters").hasClass("affix-top")&&$(document).width()>730?($(".searchbig .fRow").show(),$("#filters-txt").hide()):s>a&&!$(".filters").hasClass("pernam")&&$(document).width()>730&&($(".searchbig .fRow").hide(),w.addClass("fexpand"),w.removeClass("fcollapse"),$(this).hasClass("fexpand")||$("#filters-txt").text($("#filters-txt").data("filterexpand")).show())}function t(){$(".searchbig .fRow").show(),$(document).width()>640&&$("#filters-txt").text($("#filters-txt").data("filtercollapse")).hide(),w.addClass("fcollapse"),w.removeClass("fexpand")}$(window).on("load",function(){$(window).on("resize.searchfilters",e),$(window).on("scroll.affix.data-api",e)}),$(".filters").on("affixed-top.bs.affix",t),w.on("click.searchfilters",function(e){e.preventDefault();var a=$(".filters");a.hasClass("affix")&&(a.hasClass("pernam")?a.removeClass("pernam"):a.addClass("pernam"));if($(this).hasClass("fexpand"))t();else{var s=$(".searchbig .fRow");s.filter(function(e,t){return $(t).offset().top>s.first().offset().top}).hide(),$("#filters-txt").text($("#filters-txt").data("filterexpand")).show(),$(this).addClass("fexpand"),$(this).removeClass("fcollapse")}$(this).change()}),$(document).width()>641&&$("#filters-txt").hide()},this.initScroll=function(e){if("undefined"==typeof isOldIE||!isOldIE){var t=$(e);$(document).on("click.dropdown.data-api,","[data-toggle=dropdown],[class=search-combobox]",function(){t.is(":visible")&&("object"!=typeof t.data("jsp")?(t.jScrollPane({showArrows:!0,horizontalGutter:30,verticalGutter:30,mouseWheelSpeed:30,contentWidth:"0px"}),t.on("click",".jspVerticalBar",function(e){e.stopPropagation()})):t.data("jsp").reinitialise(),t.height(t.data("jsp").getContentHeight()),t.data("jsp").reinitialise(),r.trigger("reinitNEW.newselect",e))}),t.on("reinit.scrollpane",function(){t.is(":visible")&&("object"!=typeof t.data("jsp")?(t.jScrollPane({showArrows:!0,horizontalGutter:30,verticalGutter:30,mouseWheelSpeed:30,contentWidth:"0px"}),t.on("click",".jspVerticalBar",function(e){e.stopPropagation()})):t.data("jsp").reinitialise(),t.height(t.data("jsp").getContentHeight()),t.data("jsp").reinitialise())}),t.on("reposition.scrollpane",function(e,a){t.data("jsp").scrollToElement(a.element)})}}},SearchResults=function(e,t){var a=this,s=null,n={},i=$("#search-results"),o=$("#loader-wrapper"),r=$("#page-input"),l=_.template(_.unescape($("#list-item-template").html())),d=_.template(_.unescape($("#list-item-plus7-template").html())),c=(_.template(_.unescape($("#variants-popover-template").html())),_.template(_.unescape($("#assets-item-template").html()))),h=_.template(_.unescape($("#special-attr-item-template").html())),p=_.template(_.unescape($("#rating-item-template").html())),u=_.template(_.unescape($("#load-more-item-template").html())),f=_.template(_.unescape($("#loading-item-template").html())),m=_.template(_.unescape($("#no-results-item-template").html())),g=_.template(_.unescape($("#results-counter-template").html()));e.on("change",":input, input",function(t){r.val(1),e.submit()}),e.on("submit",function(t){$(this).data("block-ajax")||(a.prepareResultsList(!(parseInt(r.val(),10)>1),function(){a.requestForResults(e.serialize(),a.processResponse)}),t.preventDefault())}),i.on("click","a#load-more-offers",function(t){r.val(parseInt(r.val(),10)+1),e.submit(),t.preventDefault(),$(this).parent().remove()}),$(document).click(function(e){(!$(e.target).closest(".popover").length&&!$(e.target).data("variants-id")||$(e.target).hasClass("popover-close"))&&$("[data-variants-id]").each(function(){$(this).data("popover")&&$(this).data("popover").tip().hasClass("in")&&$(this).popover("hide")})}),$("#search-results").on("click",".popover-close",function(e){e.preventDefault()}),this.requestForResults=function(e,a){s&&s.abort(),void 0!==n[e]?a(n[e]):s=$.getJSON(t,e,function(t){if(s=null,"itaka"==t.data.source||"sletat"==t.data.source){var i=0,o="itaka"===t.data.source?$(".exchange-rates__value_pln"):$(".exchange-rates__value_rub");o.length>0&&(i=parseFloat(o.text()));for(var r=0;t.data.results&&r<t.data.results.length;r++){var l=t.data.results[r],d=parseFloat(l.price.toString().replace(/\&nbsp\;/,"")),c=parseFloat(l.ymaxPriceItakaHit.toString().replace(/\&nbsp\;/,""));l.price=Math.round(100*d*i)/100,l.ymaxPriceItakaHit=Math.round(100*c*i)/100}}a(t.data),n[e]=t.data})},this.processResponse=function(e){if(1===parseInt(r.val(),10)&&($("#path h1 span.results-counter").remove(),(parseInt(e.count,10)>0||(e.results&&e.results.length>0))&&$("#path h1").append(g({counter:parseInt(e.count,10)>0?e.count:e.results.length}))),null!=e&&void 0!==e.results&&null!==e.results&&e.results.length){for(var t="",s=[],n=0;n<e.results.length;n++){var o=e.results[n];o.priceTypeLabel=e.priceTypeLabel,o.priceTypeClass=e.priceTypeClass,void 0!==o.additionalHotel?t+=a.generatePlus7Row(o):t+=a.generateRow(o),criteoDynamicResults&&s.push(o.productCode)}if(criteoDynamicResults&&(window.criteo_q=window.criteo_q||[],window.criteo_q.push({event:"setAccount",account:20310},{event:"setHashedEmail",email:""},{event:"setSiteType",type:criteoSetSiteType},{event:"viewList",item:s},{event:"viewSearch",checkin_date:criteoCheckinDate,checkout_date:criteoCheckOutDate})),t.length){$(window).off("scroll.lazybloading"),$(".results-loading").remove(),$(".overlay").remove(),$(".hotel-list-photo-preview-blank").parent().remove(),t=$(t),parseInt(e.page,10)>1?r.val(e.page):(r.val(1),i.empty()),i.append(t),e.has_more&&i.append(u),t.find(".read-more-list-desc").each(function(){var e=$(this),t=e.prev();e.toggle(t.outerHeight()<t[0].scrollHeight)});var l=!1;$(window).on("resize",function(){!function(){var e=$(window).width();if(e<768&&!l){var t=i.find('.hotel-list-photo-preview img[src$="sp.gif"]');_.each(t,function(e,t){var a=$(e),s=a.attr("src");a.attr("src",s.replace("sp.gif","mobile_sp.gif"))}),l=!0}else e>=768&&l&&(t=i.find('.hotel-list-photo-preview img[src$="sp.gif"]'),_.each(t,function(e,t){var a=$(e),s=a.attr("src");a.attr("src",s.replace("mobile_sp.gif","sp.gif"))}),l=!1)}()}).resize(),l&&1===parseInt(e.page,10)&&$(window).scrollTop(0),i.find('.hotel-list-photo-preview img[src$="sp.gif"]').lazyload({effect:"fadeIn",skip_invisible:!1,threshold:300})}else a.prepareNoResultsList()}else a.prepareNoResultsList();$("#search-results").trigger("ajaxloaded",[e])},this.prepareResultsList=function(e,t){var a=e||!1;i.removeClass("search-results_none"),a?$("body").animate({scrollTop:0},{duration:"fast",complete:function(){1===search_loadAjaxResults?search_loadAjaxResults=0:$("#search-results").prepend('<div class="overlay" ></div>'),o.html(f()).fadeIn("fast",function(){"function"==typeof t&&(t(),$(".mainbottom").removeClass("mainbottom_no-result"))})}}):(i.append(f),"function"==typeof t&&t())},this.prepareNoResultsList=function(){i.html(m).addClass("search-results_none"),o.html(""),$(".mainbottom").addClass("mainbottom_no-result")},this.generateRow=function(e){return e.ratingHtml=parseFloat(e.rating)?p({ratingHtml:e.rating,showOpinionsProjectIframe:e.showOpinionsProjectIframe}):"",e.assets=e.assetsList?c({list:e.assetsList}):"",e.offerAttributes=e.attributesList&&e.attributesList.length>0?h({list:e.attributesList}):"",l(e)},this.generatePlus7Row=function(e){return e.ratingHtml=parseFloat(e.rating)?p({ratingHtml:e.rating,showOpinionsProjectIframe:e.showOpinionsProjectIframe}):"",e.assets=e.assetsList?c({list:e.assetsList}):"",e.offerAttributes=e.attributesList&&e.attributesList.length>0?h({list:e.attributesList}):"",e.additionalHotel.ratingHtml=parseFloat(e.additionalHotel.rating)?p({ratingHtml:e.additionalHotel.rating,showOpinionsProjectIframe:e.showOpinionsProjectIframe}):"",e.additionalHotel.assets=e.additionalHotel.assetsList?c({list:e.additionalHotel.assetsList}):"",e.additionalHotel.offerAttributes=e.additionalHotel.attributesList&&e.additionalHotel.attributesList.length>0?h({list:e.additionalHotel.attributesList}):"",d(e)}};$(function(){void 0!==SearchForm&&"undefined"!=typeof search_validateUrl&&((searchForm=new SearchForm($("#search-form"),search_validateUrl)).initCookieFiltersTailsPrice(),searchForm.initCookieChildrenDate(),searchForm.initDateInputs2(!0,!0),searchForm.initDropdownSelect($("#duration-select")),searchForm.initDropdownSelect($("#destination-select-popup"),!0,!0),searchForm.initDropdownSelect($("#departures-select")),!$(".impt11").length>0?(searchForm.initDropdownSelect($("#foods-select")),searchForm.initDropdownSelect($("#standard-select"),!1,!1,""),searchForm.initDropdownSelect($("#price-select"),!1,!1,""),searchForm.initDropdownSelect($("#categories-select")),searchForm.initDropdownSelect($("#promotions-select")),searchForm.initDropdownSelect($("#easements-select")),searchForm.initDropdownSelect($("#grade-select"))):(searchForm.initDropdownSelect($("#activity-select")),searchForm.initDropdownSelect($("#difficulty-select"))),searchForm.initDropdownSelect($("#order-select"),!1,!1,null,!0),searchForm.initDropdownMultiselect($("#departure-select")),searchForm.initDropdownMultiselect($("#food-select")),searchForm.initParticipantsInput(),searchForm.initFilters(),searchForm.initViewTypeInput(),searchForm.initPriceTypeInput(),searchForm.initValidation(),searchForm.validate(),searchForm.initFiltersToggle())});var SearchFormDestinationPlugin=function(e){"use strict";function t(){d.find(".selectable").removeClass("open"),d.removeClass("pushItUp"),$(".popup-bg").hide(),$("#head, .searchbig_header").attr("style","display: block"),$("body, html").css({overflow:"auto",height:"auto"})}function a(e){e.preventDefault(),e.stopPropagation()}function s(){d.addClass("alreadyset");var t=_.template(_.unescape($("#destination-popup-header-template").html())),a=_.template(_.unescape($("#destination-popup-footer-template").html())),s=_.template(_.unescape($("#popup-bg-template").html())),n=_.template(_.unescape($("#destination-popup-regions-template").html()));d.find(".option-parent").each(function(){var e=$(this);e.attr("data-children-counter",0),$(this).nextUntil(".option-parent").each(function(){var t=parseInt(e.attr("data-children-counter"));t++,e.attr("data-children-counter",t)});var t=parseInt(e.attr("data-children-counter"));t>0&&e.find("label").append(n({parentNodeChildrenCounter:t}))});var i=$(e.sourceRowSelector+" .selectable-container");i.find(".destination-popup-header").remove(),i.find(".destination-popup-footer").remove(),i.prepend(t({title:d.data("popup-title")})),i.append(a({showRegions:e.hesRegions})),$("body").append(s),d.find(".option-parent-children-counter").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=0,a=$(this),s=null,n=a.closest(".option-parent");n.nextUntil(".option-parent").each(function(){$(this).hasClass("option-disabled")||(t++,s=$(this).toggleClass("child-active"))}),t%2==1&&s.addClass("last-child-odd"),t>0&&s.addClass("last-child"),n.toggleClass("parent-active"),l(),function(e){if(null!==h&&"object"==typeof h.data("jsp")){var t=h.data("jsp");t.scrollToY(parseInt(e))}}(n.position().top)}),f&&l(),d.find(".option-child").removeClass("child-active").addClass("option-disabled-search");var o=d.data("placeholder-trans");$(e.sourceRowSelector+" .options-filter-input").attr("placeholder",o),r()}function n(){if(!u){var e;e=$(window).width()>1024?3:$(window).width()>992?3:2;var t=d.find("fieldset.sort-alphabetically").children("ul"),a=t.find("li.option-parent").filter(":not(.unavailable)"),s=Math.ceil(a.length/e)-1;t.children("div").contents().unwrap();var n=[],o=0;_.each(t.children("li"),function(t,a){$(t).hasClass("option-parent")&&(o>s&&(i(n,e),o=0,n=[]),$(t).hasClass("unavailable")||o++),n.push(t)}),n.length&&i(n,e),f=!0,$(window).trigger("destinationPopupColumnsReady")}}function i(e,t){$(e).wrapAll('<div class="column-'+t+'" />')}function o(t){var a=$(e.sourceRowSelector).find(".destination-toggle-translate");"selectAll"===t?$(e.sourceRowSelector+" .destination-toggle").removeClass("destination-clear").addClass("destination-all").html(a.attr("data-on-all")):$(e.sourceRowSelector+" .destination-toggle").removeClass("destination-all").addClass("destination-clear").html(a.attr("data-off-all"))}function r(){m.length||(m=d.find("option").not(":disabled")),d.find("option:selected").length>=m.length&&o("unselectAll")}function l(){null!==h&&("object"!=typeof h.data("jsp")?(h.jScrollPane({showArrows:!0,horizontalGutter:30,verticalGutter:30,mouseWheelSpeed:30,contentWidth:"0px"}),h.on("click",".jspVerticalBar",function(e){e.stopPropagation()}),h.height(h.data("jsp").getContentHeight()),h.data("jsp").reinitialise()):(h.height(h.data("jsp").getContentHeight()),h.data("jsp").reinitialise()))}var d=$(e.sourceRowSelector),c=$(e.sourceSelectSelector),h=null;d.on("click.selectable",function(){$(this).hasClass("alreadyset")||s()});var p=$("body"),u=p.hasClass("is_mobile"),f=!1,m=[];d.on("click",".destination-regions",function(t){t.preventDefault(),t.stopPropagation();var a=$(".destination-regions-open"),s=$(".destination-regions-close");a.is(":visible")?(s.css("display","inline-block"),a.css("display","none"),$(e.sourceRowSelector).find(".option-child").addClass("child-active").removeClass("option-disabled-search"),$(e.sourceRowSelector).find(".option-parent").each(function(){var e=$(this).attr("data-children-counter");void 0!==e&&!1!==e&&parseInt(e)>0&&$(this).addClass("parent-active")})):(s.css("display","none"),a.css("display","inline-block"),$(e.sourceRowSelector).find(".option-child").removeClass("child-active").addClass("option-disabled-search"),$(e.sourceRowSelector).find(".option-parent").each(function(){var e=$(this).attr("data-children-counter");void 0!==e&&!1!==e&&parseInt(e)>0&&$(this).removeClass("parent-active")})),l()}),d.on("click",".destination-clear",function(t){t.preventDefault(),t.stopPropagation(),d.find(":selected").each(function(){$(this).prop("selected",!1)}),$(e.targetForSelectChange).trigger("changed.selectable"),d.find(".active").removeClass("active"),$(e.sourceRowSelector).find(".half-active").removeClass("half-active"),c.find("option:selected").prop("selected",!1),o("selectAll")}),d.on("click",".destination-all",function(t){t.preventDefault(),t.stopPropagation(),m.each(function(){$(this).prop("selected",!0),c.find('option[value="'+$(this).val()+'"]').prop("selected",!0)}),$(e.targetForSelectChange).trigger("changed.selectable"),o("unselectAll")}),d.on("click","button.selectable",function(){d.addClass("pushItUp"),u&&$("body, html").css({overflow:"hidden",height:"100%"}),$(window).width()<768&&$("#head, .searchbig_header").attr("style","display: none !important"),n(),$(".options-filter-input").keyup(function(){$(this).val().length>0?(d.find(".option-child").removeClass("option-disabled-search").addClass("option-common-appearance"),d.find(".option-parent").addClass("option-common-appearance")):(d.find(".option-child").addClass("option-disabled-search").removeClass("option-common-appearance"),d.find(".option-parent").removeClass("option-common-appearance"))}),r()}),d.on("click",".destination-popup-header",a),d.on("click",".destination-popup-footer",a),d.on("click",".options-filter-container",a),d.on("click",".destination-submit",t),d.on("click",".destination-popup-close",t),d.on("click",".options-container",function(){c.find("option:selected").length>0?$(e.sourceRowSelector).find(".destination-clear").removeClass("inactive"):$(e.sourceRowSelector).find(".destination-clear").addClass("inactive")}),p.on("click",".popup-bg",t),d.on("input",".options-filter-input",function(e){$(e.currentTarget).val()}),$("#search-form").on("reinitNEW.newselect",function(e,t){h=$(t)}),$(window).on("reinit.scrollpane",n),$(window).resize(function(){$(window).width()>=768&&$("#head, .searchbig_header").attr("style","display: block")})},draggableElement=function(e,t){"use strict";function a(e){return $(window).width()<768?(i.css({left:"0px",top:"0px",right:"auto",bottom:"auto"}),!1):(n.dragging=!0,i.append('<div class="clickblock"></div>'),c.css({width:i.outerWidth(),height:i.outerHeight()}).show(),r=[i.offset().left,i.offset().top-$(window).scrollTop()],void(d=[e.clientX,e.clientY]))}function s(e){n.dragging=!1,i.removeClass("disableclick"),c.hide(),i.children(".clickblock").remove(),function(){var e=$(window).width()-i.outerWidth(),t=$(window).height()-i.outerHeight();l[0]<0?l[0]=0:l[0]>e&&(l[0]=e),l[1]<0?l[1]=0:l[1]>t&&(l[1]=t),i.css({left:l[0]+"px",top:l[1]+"px",right:"auto",bottom:"auto"})}()}this.dragging=!1;var n=this,i=$(e),o=$(t),r=[0,0],l=[0,0],d=[0,0],c=i.clone();c.attr("class","draggableShadow").children().remove(),c.appendTo("body").hide(),this.init=function(){$("body").hasClass("is_mobile")||(o||(o=i),o.on("mousedown",a),$(document).on("mouseup",function(e){n.dragging&&s()}).on("mousemove",function(e){n.dragging&&function(e){var t=[d[0]-e.clientX,d[1]-e.clientY];l[0]=r[0]-t[0],l[1]=r[1]-t[1],c.css({left:l[0]+"px",top:l[1]+"px",right:"auto",bottom:"auto"})}(e)}))},this.init()};SearchFormDestinationPlugin({sourceRowSelector:".destination-popup",sourceSelectSelector:"#destination-select-popup",targetForSelectChange:"#destination-select-popup"}),$(function(){"use strict";if(void 0!==SearchResults&&"undefined"!=typeof search_resultsUrl){var e=new SearchResults($("#search-form"),search_resultsUrl);search_loadAjaxResults?e.prepareResultsList(!0,function(){e.requestForResults($("#search-form").serialize(),e.processResponse)}):(1===search_has_more&&$("#search-results").append(_.template(_.unescape($("#load-more-item-template").html()))),$("#search-results").find('.hotel-list-photo-preview img[src$="sp.gif"]').lazyload({effect:"fadeIn",skip_invisible:!1,threshold:300}),search_loadAjaxResults=!0),$("#search-results").on("click",".hotel-list-description-show",function(){$(this).parent().hasClass("description-show")?$(this).parent().removeClass("description-show"):$(this).parent().addClass("description-show")})}window.top!==window.self&&setInterval(function(){window.postMessage&&parent.postMessage($("html").height(),"*")},1e3),$("#main").on("click.gallery",".hotel-list-photo-preview",function(e){if($(window).width()<1200)return!0;e.preventDefault();for(var t=$(this).find(".hotel-list-gallery").data("search-gallery").split(","),a=[],s=0;s<t.length;s++)a.push({src:t[s],type:"image"});$.magnificPopup.open({items:a,type:"image",gallery:{tPrev:"Wcześniejszy (przycisk lewej strzłaki)",tNext:"Następny (przycisk prawej strzałki)",tCounter:"%curr% z %total%",enabled:!0},image:{tError:"Przepraszamy - problem przy ładowaniu zdjęcia."}})})});